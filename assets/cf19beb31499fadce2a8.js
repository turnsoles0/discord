"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[54183],{678081:(e,t,n)=>{n.d(t,{Z:()=>v});var r=n(785893),o=n(667294),i=n(193197),a=n(891153),l=n(337823),c=n(742269),s=n(561388);function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return p(e)}function d(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?u(e):t}function h(e,t){h=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return h(e,t)}var m=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1
;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function b(e){var t=["openFile"];e.multiple&&t.push("multiSelections");var n=e.filters;a.Z.fileManager.openFiles({properties:t,filters:n},s.zz).then((function(t){var n=t.map((function(e){return l.qF(e)}));null!=n&&e.onChange({stopPropagation:function(){return null},preventDefault:function(){return null},currentTarget:{files:n}})})).catch((function(t){e.onChange({stopPropagation:function(){return null},preventDefault:function(){return null},currentTarget:{files:null,err:t}})}))}const v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,
configurable:!0}});t&&h(e,t)}(n,e);var t=y(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=t.call(this,e))._ref=o.createRef();r.setRef=r.setRef.bind(u(r));return r}var a=n.prototype;a.activateUploadDialogue=function(){if(null!=this._ref)return this._ref.activateUploadDialogue()};a.setRef=function(e){this._ref=e};a.render=function(){return(0,r.jsx)(i.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){f(e,t,n[t])}))}return e}({ref:this.setRef,handleNativeClick:b,embedded:(0,c.nI)()},this.props))};return n}(o.Component)},516307:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(785893),o=n(667294),i=n(294184),a=n.n(i),l=n(757987),c=n(330275),s=n(852461),u=n.n(s);function f(e){
var t=e.onClick,n=e.children,i=e.tooltip,s=e.dangerous,f=void 0!==s&&s,p=e.className;return(0,r.jsx)(l.ZP,{text:i,hideOnClick:!0,children:function(e){var l=e.onMouseEnter,s=e.onMouseLeave,d=e.onClick;return(0,r.jsx)(c.zx,{onMouseEnter:l,onMouseLeave:s,onClick:function(e){e.stopPropagation();null==d||d();t(e)},dangerous:f,"aria-label":i,className:p,children:o.Children.map(n,(function(e){return o.isValidElement(e)?o.cloneElement(e,{className:a()(e.props.className,u().actionBarIcon)}):e}))})}})}},989346:(e,t,n)=>{n.d(t,{q:()=>h,Z:()=>P});var r=n(785893),o=n(667294),i=n(294184),a=n.n(i),l=n(647446),c=n(125447),s=n(159500),u=n(330275),f=n(882699);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{
for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){l=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h,m=n(461061),y=n(959797),b=n(774461),v=n.n(b);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function j(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){O(e,t,n[t])}))}return e}function S(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function E(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e)
;for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){l=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
!function(e){e[e.SMALL=0]="SMALL";e[e.MEDIUM=1]="MEDIUM"}(h||(h={}));function w(e){e.stopPropagation()}function M(e,t){var n=e.id,i=e.channelId,p=e.className,b=e.children,g=e.actions,M=e.handleEditModal,P=e.keyboardModeEnabled,A=e.onKeyDown,C=e.draftType,T=e.size,N=void 0===T?h.MEDIUM:T,I=(0,c.JA)(n),L=I.onFocus,D=E(I,["onFocus"]),_=function(e,t){var n=d((0,o.useState)(!1),2),r=n[0],i=n[1];return{handleFocus:(0,o.useCallback)((function(t){(t.target===t.currentTarget||t.currentTarget.contains(document.activeElement))&&i(!0);null!=e&&e(t)}),[e]),handleBlur:(0,o.useCallback)((function(e){e.target!==e.currentTarget&&e.currentTarget.contains(document.activeElement)||i(!1);null!=t&&t(e)}),[t]),isFocused:r}}(L),R=_.handleFocus,Z=_.handleBlur,k=x(o.useState(!1),2),U=k[0],B=k[1],F=N===h.SMALL,z=null!=g&&(!F||U);return(0,r.jsx)(l.tE,{children:(0,r.jsx)("li",S(j({},D),{onFocus:R,onBlur:Z,onKeyDown:function(e){if(P){switch(e.which){case m.yXg.D:e.preventDefault();s.Z.remove(i,n,C);return
;case m.yXg.E:if(null!=M){e.preventDefault();M(e)}return;case m.yXg.BACKSPACE:if(e.ctrlKey){e.preventDefault();s.Z.clearAll(i,C)}else{e.preventDefault();s.Z.remove(i,n,C)}return;case m.yXg.ARROW_UP:if(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)return;e.preventDefault();f.S.dispatchToLastSubscribed(m.CkL.FOCUS_MESSAGES,{atEnd:!0})}null==A||A(e)}},className:a()(v().upload,p),ref:t,children:(0,r.jsxs)("div",{className:v().uploadContainer,onMouseEnter:function(){F&&B(!0)},onMouseLeave:function(){F&&B(!1)},children:[b,z?(0,r.jsx)("div",{className:v().actionBarContainer,children:(0,r.jsx)("div",{className:v().actionBar,onContextMenu:w,"aria-label":y.Z.Messages.ATTACHMENT_UTILITIES,children:(0,r.jsx)(u.ZP,{className:a()(O({},v().miniPopover,F)),children:g})})}):null]})}))})}const P=o.forwardRef(M)},935032:(e,t,n)=>{n.d(t,{r:()=>oe,Z:()=>ie})
;var r=n(785893),o=n(667294),i=n(294184),a=n.n(i),l=n(159500),c=n(251356),s=n(172458),u=n(381139),f=n(402124),p=n(191940),d=n(146530),h=n(685351),m=n(801593),y=n(67416),b=n(932847),v=n(742269),g=n(588641),O=n(461061),j=n(959797),S=n(334276),E=n.n(S),x=n(380203),w=n.n(x);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function C(e){C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return C(e)}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&D(e,t)}function N(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){A(e,t,n[t])}))}return e}function I(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function L(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e,t){D=Object.setPrototypeOf||function(e,t){e.__proto__=t
;return e};return D(e,t)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){l=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}
;function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}var k=104;function U(e){var t,n,i=e.file,l=_(o.useState(),2),c=l[0],s=l[1],u=_(o.useState(!1),2),f=u[0],p=u[1],d=_(o.useState({}),2),h=d[0],m=d[1],y=o.useRef(null);o.useEffect((function(){null!=y.current&&p(!1);if(null!=i){var e=URL.createObjectURL(i);s(e);return function(){s(void 0);URL.revokeObjectURL(e)}}}),[i]);o.useLayoutEffect((function(){var e=y.current;null!=e&&(e.onload=function(){var t=e.naturalWidth/e.naturalHeight,n=Math.max(.66,Math.min(t,4));m(1===n?{width:k,height:k}:n>1?{width:k*n,height:void 0}:{width:void 0,height:k/n});p(!0)})}),[])
;var b,v,g=Math.max(16,(120-(null!==(n=null===(t=y.current)||void 0===t?void 0:t.width)&&void 0!==n?n:0))/2);return(0,r.jsx)("img",{ref:y,src:c,className:a()(E().icon,A({},E().image,!f)),"aria-hidden":!0,alt:"",style:{width:null!==(b=h.width)&&void 0!==b?b:"initial",height:null!==(v=h.height)&&void 0!==v?v:k,marginLeft:g,marginRight:g,marginTop:null!=h.height?k-h.height-33:-33}})}var B=function(e){T(n,e);var t=Z(n);function n(){P(this,n);return t.apply(this,arguments)}n.prototype.render=function(){return this.props.upload.item.platform!==c.o.WEB?null:this.props.upload.isImage?(0,r.jsx)(U,{file:this.props.upload.item.file}):(0,r.jsx)("div",{className:a()(E().icon,A({},E()[null!==(e=this.props.upload.classification)&&void 0!==e?e:""],!0))});var e};return n}(o.Component),F=function(e){T(n,e);var t=Z(n);function n(e){P(this,n);var r,o,i,a;(r=t.call(this,e)).cancelAll=function(){l.Z.clearAll(r.props.channelId,r.props.draftType);r.props.onClose()};r.cancel=function(){r.props.onClose()}
;r.handleTextChange=function(e,t,n){r.setState({textValue:t,richValue:n})};r.handleSubmit=function(){var e=r.props,t=e.upload,n=e.onClose,o=e.onSubmit,i=r.state;o({upload:t,name:i.filename,description:i.description,spoiler:i.hasSpoiler});n()};var c,u,p,d=e.ignoreDraft?"":f.Z.getDraft(r.props.channelId,e.draftType);r.state=I(N({},(0,s.eK)(d)),{textFocused:!0,hasSpoiler:null!==(c=null===(o=e.upload)||void 0===o?void 0:o.spoiler)&&void 0!==c&&c,filename:null!==(u=null===(i=e.upload)||void 0===i?void 0:i.filename)&&void 0!==u?u:"",contentWarningProps:null,description:null!==(p=null===(a=e.upload)||void 0===a?void 0:a.description)&&void 0!==p?p:""});return r}var i=n.prototype;i.componentDidMount=function(){var e;(null===(e=this.props.upload)||void 0===e?void 0:e.showLargeMessageDialog)&&this.props.upload.item.platform===c.o.WEB&&b.default.track(O.rMx.OPEN_MODAL,{type:"Upload Large Message",message_content_length:this.props.upload.item.file.size});v.FB&&g.default.focus()}
;i.shouldComponentUpdate=function(e){return null!=e.upload};i.componentDidUpdate=function(e){var t,n;if((null===(t=e.upload)||void 0===t?void 0:t.filename)!==(null===(n=this.props.upload)||void 0===n?void 0:n.filename)){var r,o;this.setState({filename:null!==(o=null===(r=this.props.upload)||void 0===r?void 0:r.filename)&&void 0!==o?o:""})}};i.render=function(){var e=this,t=this.props,n=t.upload,i=t.transitionState,l=t.messageMaxLength,c=this.state.hasSpoiler;return(0,r.jsxs)(y.Y0,{"aria-label":j.Z.Messages.ATTACH_FILES,size:y.Cg.DYNAMIC,transitionState:i,className:a()(E().uploadModal),children:[(0,r.jsxs)("div",{className:E().inner,children:[(0,r.jsxs)("div",{className:a()(E().file,A({},E().expandable,n.isImage)),children:[(0,r.jsx)(B,{upload:n}),(0,r.jsxs)("div",{className:E().description,children:[(0,r.jsx)("div",{className:E().filename,children:n.showLargeMessageDialog?j.Z.Messages.LARGE_MESSAGE_UPLOAD_TITLE_MAX_LENGTH.format({maxLength:l}):n.filename}),n.showLargeMessageDialog?(0,
r.jsx)("div",{className:E().subtitle,children:j.Z.Messages.LARGE_MESSAGE_UPLOAD_SUBTITLE}):null]})]}),(0,r.jsx)("div",{className:E().comment,children:(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)("div",{className:E().label,children:(0,r.jsx)("span",{children:j.Z.Messages.UPLOAD_AREA_FILENAME})}),(0,r.jsx)(m.ZP,{className:a()(E().channelTextAreaUpload,w().marginTop8),value:this.state.filename,onChange:function(t){return e.setState({filename:t})},onKeyDown:function(t){if(t.which===O.yXg.ENTER)return e.handleSubmit()}}),n.isImage?(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)("div",{className:E().label,children:(0,r.jsx)("span",{children:j.Z.Messages.ATTACHMENT_MODAL_IMAGE_DESCRIPTION_LABEL})}),(0,r.jsx)(m.ZP,{className:a()(E().channelTextAreaUpload,w().marginTop8),placeholder:j.Z.Messages.ATTACHMENT_MODAL_IMAGE_DESCRIPTION_PLACEHOLDER,value:this.state.description,onChange:function(t){return e.setState({description:t})},onKeyDown:function(t){if(t.which===O.yXg.ENTER)return e.handleSubmit()}})]
}):null,(0,r.jsx)(d.Z,{className:w().marginBottom20,value:c,onChange:function(t,n){return e.setState({hasSpoiler:n})},children:(0,r.jsx)(h.x,{variant:"text-sm/normal",children:j.Z.Messages.SPOILER_MARK_SELECTED})})]})})]}),(0,r.jsx)("div",{className:E().footer,children:(0,r.jsxs)("div",{className:a()(E().hasSpoilers,E().footerRightAlign),children:[(0,r.jsx)(p.Co,{type:"button",look:p.Co.Looks.LINK,color:p.Co.Colors.PRIMARY,onClick:this.cancel,children:(0,r.jsx)("span",{children:j.Z.Messages.CANCEL})}),(0,r.jsx)(p.Co,{type:"submit",onClick:this.handleSubmit,children:(0,r.jsx)("span",{children:j.Z.Messages.ATTACHMENT_MODAL_SAVE})})]})})]})};return n}(o.Component);function z(e){var t=(0,u.Z)();return e.upload.item.platform!==c.o.WEB?null:(0,r.jsx)(F,I(N({},e),{file:e.upload.item.file,messageMaxLength:t}))}var K=n(631512),H=n(679755),G=n(86511),q=n(878627),W=n(770212),X=n(897576),V=n(516307),Y=n(989346),$=n(639063),J=n.n($);function Q(e,t){(null==t||t>e.length)&&(t=e.length)
;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ee(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function te(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){l=!0;o=e}finally{try{a||null==n.return||n.return()}finally{
if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e){var t=e.file,n=e.alt,i=e.spoiler,l=e.size,c=void 0===l?Y.q.MEDIUM:l,s=e.onMouseEnter,u=ne(o.useState(!1),2),f=u[0],p=u[1],d=ne(o.useState(),2),h=d[0],m=d[1],y=o.useRef(null),b=c===Y.q.SMALL;o.useEffect((function(){if(null!=t){var e=URL.createObjectURL(t);m(e);return function(){m(void 0);URL.revokeObjectURL(e)}}}),[t]);return(0,r.jsx)("div",{onMouseEnter:s,className:a()(J().imageContainer,ee({},J().imageSmall,b)),children:(0,r.jsx)(K.Z.Provider,{value:!i,children:(0,
r.jsx)(K.C,{type:K.C.Types.ATTACHMENT,onReveal:function(){return p(!0)},className:J().spoilerContainer,children:function(e){var t;return(0,r.jsxs)("div",{className:J().spoilerWrapper,children:[(0,r.jsx)("img",{ref:y,src:h,className:a()(J().image,(t={},ee(t,J().spoiler,e),ee(t,J().imageSmall,b),t)),"aria-hidden":!0,alt:null!=n?n:""}),(0,r.jsxs)("div",{className:J().tags,children:[null!=n&&""!==n?(0,r.jsx)("span",{className:J().altTag,children:j.Z.Messages.IMAGE_ALT}):null,f&&i?(0,r.jsx)("span",{className:J().altTag,children:j.Z.Messages.SPOILER}):null]})]})}})})})}function oe(e){var t,n,o=e.upload,i=e.size,l=void 0===i?Y.q.MEDIUM:i,s=e.onMouseEnter,u=l===Y.q.SMALL;return o.isImage&&o.item.platform===c.o.WEB?(0,r.jsx)(re,{file:o.item.file,alt:o.description,spoiler:o.spoiler,size:l,onMouseEnter:s}):(0,r.jsx)("div",{onMouseEnter:s,className:a()(J().icon,J().imageContainer,(n={},ee(n,J()[null!==(t=o.classification)&&void 0!==t?t:""],!0),ee(n,J().imageSmall,u),n)),children:(0,r.jsx)("div",{
className:J().tags,children:o.spoiler?(0,r.jsx)("span",{className:J().altTag,children:j.Z.Messages.SPOILER}):null})})}function ie(e){var t=e.channelId,n=e.draftType,i=e.upload,c=e.keyboardModeEnabled,s=e.label,u=e.size,p=void 0===u?Y.q.MEDIUM:u,d=e.canEdit,m=void 0===d||d,y=e.hideFileName,b=void 0!==y&&y,v=p===Y.q.SMALL,g=function(e){e.stopPropagation();(0,X.h7)((function(e){return(0,r.jsx)(z,te(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){ee(e,t,n[t])}))}return e}({},e),{draftType:f.d.ChannelMessage,upload:i,channelId:t,onSubmit:function(e){var r=e.name,o=e.description,a=e.spoiler;l.Z.update(t,i.id,n,{filename:r,description:o,spoiler:a})}}))}))};return(0,r.jsxs)(Y.Z,{actions:(0,r.jsxs)(o.Fragment,{children:[m?(0,r.jsx)(V.Z,{
className:a()(ee({},J().action,v)),tooltip:j.Z.Messages.ATTACHMENT_UTILITIES_SPOILER,onClick:function(){return l.Z.update(t,i.id,n,{spoiler:!i.spoiler})},children:i.spoiler?(0,r.jsx)(G.Z,{className:a()(ee({},J().actionBarIcon,v))}):(0,r.jsx)(H.Z,{className:a()(ee({},J().actionBarIcon,v))})}):null,m?(0,r.jsx)(V.Z,{className:a()(ee({},J().action,v)),tooltip:j.Z.Messages.ATTACHMENT_UTILITIES_MODIFY,onClick:g,children:(0,r.jsx)(q.Z,{className:a()(ee({},J().actionBarIcon,v))})}):null,(0,r.jsx)(V.Z,{className:a()(ee({},J().action,v)),tooltip:j.Z.Messages.ATTACHMENT_UTILITIES_REMOVE,onClick:function(){return l.Z.remove(t,i.id,n)},dangerous:!0,children:(0,r.jsx)(W.Z,{className:a()(ee({},J().actionBarIcon,v))})})]}),draftType:n,id:i.id,channelId:t,handleEditModal:g,keyboardModeEnabled:c,size:p,className:a()(ee({},J().attachmentItemSmall,v)),children:[(0,r.jsx)(oe,{upload:i,size:p}),!b&&(0,r.jsx)("div",{className:J().filenameContainer,children:(0,r.jsx)(h.x,{className:J().filename,
variant:"text-sm/normal",children:null!=s?s:i.filename})})]})}},381139:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(791462),o=n(859023),i=n(590483),a=n(461061);function l(){return(0,r.e7)([o.default],(function(){return i.ZP.canUseIncreasedMessageLength(o.default.getCurrentUser())}))?a.en1:a.J6R}},330275:(e,t,n)=>{n.d(t,{Z0:()=>p,zx:()=>d,ZP:()=>h});var r=n(785893),o=(n(667294),n(294184)),i=n.n(o),a=n(629590),l=n(264057),c=n.n(l);function s(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function u(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}
function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function p(e){var t=e.className;return(0,r.jsx)("div",{className:i()(t,c().separator)})}function d(e){var t,n=e.onClick,o=e.onContextMenu,l=e.className,p=e.selected,d=void 0!==p&&p,h=e.children,m=e.disabled,y=void 0!==m&&m,b=e.dangerous,v=f(e,["onClick","onContextMenu","className","selected","children","disabled","dangerous"]);return(0,r.jsx)(a.Z,u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable
}))));r.forEach((function(t){s(e,t,n[t])}))}return e}({onClick:y?void 0:n,onContextMenu:y?void 0:o,className:i()(l,(t={},s(t,c().button,!0),s(t,c().selected,d),s(t,c().disabled,y),s(t,c().dangerous,b),t))},v),{children:h}))}const h=function(e){var t=e.className,n=e.children;return(0,r.jsx)("div",{className:i()(t,c().wrapper),children:n})}}}]);
//# sourceMappingURL=cf19beb31499fadce2a8.js.map