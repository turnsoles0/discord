"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[65926],{910866:(e,n,t)=>{t.d(n,{m:()=>r});var r;!function(e){e.MP4="video/mp4"}(r||(r={}))},165926:(e,n,t)=>{t.d(n,{S:()=>Ve,Z:()=>Ue});var r=t(785893),o=t(667294),a=t(294184),c=t.n(a),i=t(791462),s=t(365523),l=t(600341),u=t(409271),f=t(404534),d=t(842592),p=t(859023),O=t(326440),b=t(48843),v=t(897576),g=t(590483),m=t(989822),y=t(910016),h=t(930149),j=t(972271),E=t(281081),A=t(859169),_=t(64833),I=t(136481),M=t(453642),x=t(405388),P=t(629590),w=t(685351),k=t(757987),C=t(240243);function D(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function N(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){
return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function S(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++){t=a[r];n.indexOf(t)>=0||(o[t]=e[t])}return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){t=a[r];n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}}return o}function R(e){var n=e.width,t=void 0===n?24:n,o=e.height,a=void 0===o?24:o,c=e.color,i=void 0===c?"currentColor":c,s=e.className,l=e.foreground,u=S(e,["width","height","color","className","foreground"]);return(0,r.jsx)("svg",N(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){D(e,n,t[n])}))}return e}({},(0,C.Z)(u)),{className:s,width:t,height:a,viewBox:"0 0 32 32",children:(0,r.jsx)("path",{className:l,
d:"M10.5 24c0-3.682 2.318-6 6-6s6 2.318 6 6h-12zM16.5 16a4 4 0 100-8 4 4 0 000 8zM29.166 15.334H28.5a.334.334 0 00-.334.333v.667c0 .183.15.333.334.333h.666c.184 0 .334-.15.334-.333v-.667a.334.334 0 00-.334-.333zM26.5 15h-1.333a.334.334 0 00-.334.333v1.334c0 .183.15.333.334.333H26.5c.183 0 .334-.15.334-.333v-1.334A.334.334 0 0026.5 15zM31.167 16.333a.333.333 0 100-.667.333.333 0 000 .667zM29.166 11.334H28.5a.334.334 0 00-.334.333v.667c0 .183.15.333.334.333h.666c.184 0 .334-.15.334-.333v-.667a.334.334 0 00-.334-.333zM26.5 11h-1.333a.334.334 0 00-.334.333v1.334c0 .183.15.333.334.333H26.5c.183 0 .334-.15.334-.333v-1.334A.334.334 0 0026.5 11zM31.167 12.333a.333.333 0 100-.667.333.333 0 000 .667zM29.166 7.334H28.5a.335.335 0 00-.334.333v.667c0 .183.15.333.334.333h.666c.184 0 .334-.15.334-.333v-.667a.335.335 0 00-.334-.333zM26.5 7h-1.333a.335.335 0 00-.334.333v1.334c0 .183.15.333.334.333H26.5c.183 0 .334-.15.334-.333V7.333A.335.335 0 0026.5 7zM31.167 8.333a.333.333 0 100-.667.333.333 0 000 .667zM29.166 23.334H28.5a.334.334 0 00-.334.333v.667c0 .183.15.333.334.333h.666c.184 0 .334-.15.334-.333v-.667a.334.334 0 00-.334-.333zM26.5 23h-1.333a.334.334 0 00-.334.333v1.334c0 .183.15.333.334.333H26.5c.183 0 .334-.15.334-.333v-1.334A.334.334 0 0026.5 23zM31.167 24.333a.333.333 0 100-.667.333.333 0 000 .667zM29.166 19.334H28.5a.334.334 0 00-.334.333v.667c0 .183.15.333.334.333h.666c.184 0 .334-.15.334-.333v-.667a.334.334 0 00-.334-.333zM26.5 19h-1.333a.334.334 0 00-.334.333v1.334c0 .183.15.333.334.333H26.5c.183 0 .334-.15.334-.333v-1.334A.334.334 0 0026.5 19zM31.167 20.333a.333.333 0 100-.667.333.333 0 000 .667zM4.5 15.334h-.667a.334.334 0 00-.333.333v.667c0 .183.15.333.333.333H4.5c.183 0 .333-.15.333-.333v-.667a.334.334 0 00-.333-.333zM7.833 15H6.5a.335.335 0 00-.333.333v1.334c0 .183.15.333.333.333h1.333c.184 0 .333-.15.333-.333v-1.334A.334.334 0 007.833 15zM1.833 16.333a.333.333 0 100-.667.333.333 0 000 .667zM4.5 11.334h-.667a.334.334 0 00-.333.333v.667c0 .183.15.333.333.333H4.5c.183 0 .333-.15.333-.333v-.667a.334.334 0 00-.333-.333zM7.833 11H6.5a.335.335 0 00-.333.333v1.334c0 .183.15.333.333.333h1.333c.184 0 .333-.15.333-.333v-1.334A.334.334 0 007.833 11zM1.833 12.333a.333.333 0 100-.667.333.333 0 000 .667zM4.5 7.334h-.667a.335.335 0 00-.333.333v.667c0 .183.15.333.333.333H4.5c.183 0 .333-.15.333-.333v-.667a.335.335 0 00-.333-.333zM7.833 7H6.5a.335.335 0 00-.333.333v1.334c0 .183.15.333.333.333h1.333c.184 0 .333-.15.333-.333V7.333A.335.335 0 007.833 7zM1.833 8.333a.333.333 0 100-.667.333.333 0 000 .667zM4.5 23.334h-.667a.334.334 0 00-.333.333v.667c0 .183.15.333.333.333H4.5c.183 0 .333-.15.333-.333v-.667a.334.334 0 00-.333-.333zM7.833 23H6.5a.335.335 0 00-.333.333v1.334c0 .183.15.333.333.333h1.333c.184 0 .333-.15.333-.333v-1.334A.334.334 0 007.833 23zM1.833 24.333a.333.333 0 100-.667.333.333 0 000 .667zM4.5 19.334h-.667a.334.334 0 00-.333.333v.667c0 .183.15.333.333.333H4.5c.183 0 .333-.15.333-.333v-.667a.334.334 0 00-.333-.333zM7.833 19H6.5a.335.335 0 00-.333.333v1.334c0 .183.15.333.333.333h1.333c.184 0 .333-.15.333-.333v-1.334A.334.334 0 007.833 19zM1.833 20.333a.333.333 0 100-.667.333.333 0 000 .667z",
fill:i})}))}var Z=t(760654),B=t(732031),T=t(52074),V=t(10178),U=t(88414),L=t(226300),H=t(109813),z=t(932847),G=t(917870),W=t(346529),K=t(352555),F=t(271606),q=t(461061),X=t(682881),Y=t(476154),$=t(298716),J=t(959797),Q=t(750812),ee=t.n(Q);function ne(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function te(e,n,t,r,o,a,c){try{var i=e[a](c),s=i.value}catch(e){t(e);return}i.done?n(s):Promise.resolve(s).then(r,o)}function re(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function c(e){te(a,r,o,c,i,"next",e)}function i(e){te(a,r,o,c,i,"throw",e)}c(void 0)}))}}function oe(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function ae(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){oe(e,n,t[n])}))}return e}function ce(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function ie(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++){t=a[r];n.indexOf(t)>=0||(o[t]=e[t])}return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){t=a[r]
;n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}}return o}function se(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],c=!0,i=!1;try{for(t=t.call(e);!(c=(r=t.next()).done);c=!0){a.push(r.value);if(n&&a.length===n)break}}catch(e){i=!0;o=e}finally{try{c||null==t.return||t.return()}finally{if(i)throw o}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return ne(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ne(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var le=function(e,n){var t,r,o,a,c={
label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;(r=0,o)&&(a=[2&a[0],o.value]);switch(a[0]){case 0:case 1:o=a;break;case 4:c.label++;return{value:a[1],done:!1};case 5:c.label++;r=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(o=c.trys,o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){c.label=a[1];break}if(6===a[0]&&c.label<o[1]){c.label=o[1];o=a;break}if(o&&c.label<o[2]){c.label=o[2];c.ops.push(a);break}o[2]&&c.ops.pop();c.trys.pop();continue}a=n.call(e,c)}catch(e){a=[6,e];r=0}finally{t=o=0}if(5&a[0])throw a[1];return{
value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};function ue(e){var n,t=e.icon,o=e.iconClassName,a=e.onClick,i=e.text,s=e.children,l=e.className,u=e.selected,f=void 0!==u&&u,d=e.disabled,p=void 0!==d&&d,O=e.onMouseLeave,b=e.onBlur;return(0,r.jsxs)(P.Z,{className:c()(l,ee().backgroundOption,(n={},oe(n,ee().backgroundOptionSelected,f),oe(n,ee().backgroundOptionDisabled,p),n)),onMouseLeave:O,onBlur:b,onClick:p?void 0:a,children:[f?(0,r.jsx)("div",{className:ee().backgroundOptionRing}):null,(0,r.jsxs)("div",{className:ee().backgroundOptionInner,children:[s,(0,r.jsxs)("div",{className:ee().backgroundOptionContent,children:[(0,r.jsx)(t,{className:c()(ee().backgroundIconOptionIcon,o)}),(0,r.jsx)(w.x,{className:ee().backgroundOptionText,color:"none",variant:"text-sm/normal",children:i})]})]})]})}function fe(e){var n=e.option,t=e.source,a=e.isAnimated,c=se(o.useState(!1),2),i=c[0],s=c[1];o.useEffect((function(){(new Image).src=t}),[t]);if(!a||null==n)return(0,r.jsx)("div",{
className:ee().backgroundImageOption,style:{backgroundImage:"url(".concat(t,")")}});var l=(0,G.rI)({userId:n.user_id,assetId:n.id,assetHash:n.asset,size:720,canAnimate:!1});return(0,r.jsx)("img",{onMouseMove:function(){return s(!0)},onMouseLeave:function(){return s(!1)},className:ee().backgroundImageOption,src:i?t:l,alt:n.id})}function de(e){var n=function(){if(null!=O&&m){I.Kw(O);z.default.track(q.rMx.PREMIUM_UPSELL_VIEWED,{type:$.cd.ANIMATED_VIDEO_BACKGROUND_NEW_PRESET,location:v.location,location_stack:g})}},o=e.option,a=e.source,s=e.selected,l=void 0!==s&&s,u=e.onSelectOption,f=e.isAnimatedImage,p=e.isVideo,O=e.hotspotLocation,b=ie(e,["option","source","selected","onSelectOption","isAnimatedImage","isVideo","hotspotLocation"]),v=(0,d.O)(),g=(0,_.Z)(A.Z.VIDEO_BACKGROUND_IMAGE_OPTION).analyticsLocations,m=(0,i.e7)([M.Z],(function(){return null!=O&&M.Z.hasHotspot(O)})),h=p?(0,r.jsx)(H.Z,{className:ee().backgroundImageOption,src:a,loop:!0,playOnHover:!0,muted:!0}):(0,r.jsx)(fe,{
isAnimated:f,option:(0,y.rD)(o)?o:void 0,source:a});return(0,r.jsxs)(P.Z,ce(ae({},b),{className:c()(ee().backgroundOption,oe({},ee().backgroundOptionSelected,l)),onClick:function(){return u(o)},onContextMenu:function(e){return(0,E.jW)(e,re((function(){var e,n;return le(this,(function(a){switch(a.label){case 0:return[4,t.e(33201).then(t.bind(t,433201))];case 1:e=a.sent(),n=e.default;return[2,function(e){return(0,r.jsx)(n,ce(ae({},e),{backgroundOption:o,optionIsInUse:l}))}]}}))})))},children:[l?(0,r.jsx)("div",{className:ee().backgroundOptionRing}):null,(0,r.jsx)("div",{onFocus:n,onMouseEnter:n,className:ee().backgroundOptionInner,children:h}),p||f?(0,r.jsx)(V.Z,{className:ee().playIcon}):null,m&&(0,r.jsx)(L.IG,{text:J.Z.Messages.NEW,className:ee().newTextBadge})]}))}function pe(){return(0,r.jsxs)("div",{className:ee().customBackgroundTooltip,children:[(0,r.jsx)(B.Z,{className:ee().customBackgroundTooltipIcon}),(0,r.jsx)(w.x,{variant:"text-sm/normal",
children:J.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_CUSTOM_TOOLTIP})]})}function Oe(e){var n=e.onClick,t=e.tooltipText,o=e.disabled,a=void 0!==o&&o,c=function(){I.Kw(X.v.ANIMATED_VIDEO_BG_CUSTOM_TOOLTIP_NEW)},s=(0,i.e7)([M.Z],(function(){return M.Z.hasHotspot(X.v.ANIMATED_VIDEO_BG_CUSTOM_TOOLTIP_NEW)})),l=s?J.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_NEW_ANIMATED_TOOLTIP:t;return(0,r.jsxs)(k.DY,{text:l,className:ee().newBackgroundTooltipContainer,children:[(0,r.jsxs)(ue,{className:ee().backgroundOptionBlurred,disabled:a,icon:Z.Z,iconClassName:ee().uploadIconOption,onClick:n,onMouseLeave:c,onBlur:c,text:(0,r.jsxs)("div",{className:ee().backgroundCustomInlineUpsell,children:[(0,r.jsx)(B.Z,{className:ee().backgroundCustomInlineUpsellIcon}),(0,r.jsx)("div",{className:ee().overflowEllipsis,children:J.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_CUSTOM})]}),children:[(0,r.jsx)("div",{className:ee().backgroundCustomInlineUpsellBackground}),(0,r.jsx)("div",{
className:ee().backgroundCustomInlineUpsellBackgroundDarkener})]}),s&&(0,r.jsx)(L.IG,{text:J.Z.Messages.NEW,className:ee().newTextBadge})]})}function be(e){var n=e.onClick,t=(0,d.O)(),a=(0,_.Z)(A.Z.VIDEO_BACKGROUND_CUSTOM_UPSELL).analyticsLocations;o.useEffect((function(){z.default.track(q.rMx.PREMIUM_UPSELL_VIEWED,{type:$.cd.VIDEO_BACKGROUNDS_INLINE,location:t.location,location_stack:a})}),[]);return(0,r.jsx)(Oe,{onClick:n,tooltipText:J.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_UPSELL_TOOLTIP})}function ve(e){var n=e.onAddBackgroundImage,o=e.disabled,a=(0,U.v)(),c=o?J.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_UPLOAD_TOOLTIP_MAX_REACHED.format({maxCustomBackgrounds:25}):J.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_UPLOAD_TOOLTIP_PREMIUM,i=[{name:J.Z.Messages.IMAGES,extensions:["jpg","jpeg","png","gif","mp4"]}];return(0,r.jsx)(Oe,{disabled:o,onClick:function(){(0,v.ZD)(re((function(){var e,o;return le(this,(function(a){switch(a.label){case 0:
return[4,Promise.all([t.e(40532),t.e(89068),t.e(18716)]).then(t.bind(t,189068))];case 1:e=a.sent(),o=e.default;return[2,function(e){return(0,r.jsx)(o,ae({maxFileSizeBytes:F.SJ,onComplete:n,uploadType:Y.pC.VIDEO_BACKGROUND,filters:i,modalTitle:J.Z.Messages.UPLOAD_BACKGROUND,imageSpecifications:J.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_UPLOAD_SUBTITLE,uploadOptionTitle:J.Z.Messages.SELECT_IMAGE_MODAL_UPLOAD_IMAGE_OR_VIDEO,showUpsellHeader:!0},e))}]}}))})),{contextKey:a})},tooltipText:c})}function ge(e){var n=e.canUseCustomBackgrounds,t=e.customBackgroundOptions,a=e.selectedOption,c=e.onSelectOption,i=e.onUpsellClick,s=e.onAddBackgroundImage,l=e.smallerOptions,u=o.useMemo((function(){return t.sort((function(e,n){return null==e.last_used||null==n.last_used?W.Z.compare(n.id,e.id):new Date(n.last_used).getTime()-new Date(e.last_used).getTime()}))}),[t]),f=u.length>=25,d=x.Z.useExperiment({}).enabled,p=(0,_.Z)(A.Z.VIDEO_BACKGROUND_OPTIONS).AnalyticsLocationProvider,O=Object.values((0,
K.Z)()),b=(d?O:O.filter((function(e){return!(0,y.Nx)(e.id)}))).sort((function(e,n){return F.E1[e.id]-F.E1[n.id]}));return(0,r.jsx)(p,{children:(0,r.jsxs)("div",{className:l?ee().backgroundOptionsSmall:ee().backgroundOptionsLarge,children:[(0,r.jsx)(ue,{selected:null==a,icon:T.Z,iconClassName:ee().noneOptionIcon,onClick:function(){return c(null)},text:J.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_NONE}),(0,r.jsx)(ue,{className:ee().backgroundOptionBlurred,selected:a===F.f7,icon:R,iconClassName:ee().blurOptionIcon,onClick:function(){return c(F.f7)},text:J.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_BLUR,children:(0,r.jsx)("div",{className:ee().backgroundOptionBlurBackground})}),n?(0,r.jsx)(ve,{onAddBackgroundImage:s,disabled:f}):(0,r.jsx)(be,{onClick:i}),u.map((function(e){return(0,r.jsx)(k.ZP,{text:(0,r.jsx)(pe,{}),"aria-label":J.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_CUSTOM_TOOLTIP,children:function(n){var t=(0,G.rI)({userId:e.user_id,assetId:e.id,assetHash:e.asset,size:720})
;return null==t?null:(0,o.createElement)(de,ce(ae({},n),{key:e.id,option:e,source:t,selected:(0,y.rD)(a)&&a.id===e.id,onSelectOption:c,isVideo:(0,G.ay)(e.asset),isAnimatedImage:(0,G.xR)(e.asset)}))}},e.id)})),b.map((function(e){var n=!0===e.isVideo;return(0,r.jsx)(k.ZP,{text:e.name,"aria-label":e.name,children:function(t){return(0,o.createElement)(de,ce(ae({},t),{key:e.id,option:e.id,source:e.source,selected:a===e.id,onSelectOption:c,isVideo:n,isAnimatedImage:!1,hotspotLocation:e.hotspotLocation}))}},e.id)}))]})})}var me=t(910866),ye=t(816725),he=t.n(ye);function je(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ee(e,n,t,r,o,a,c){try{var i=e[a](c),s=i.value}catch(e){t(e);return}i.done?n(s):Promise.resolve(s).then(r,o)}function Ae(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function c(e){Ee(a,r,o,c,i,"next",e)}function i(e){Ee(a,r,o,c,i,"throw",e)}c(void 0)}))}}
function _e(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function Ie(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){_e(e,n,t[n])}))}return e}function Me(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function xe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){
var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],c=!0,i=!1;try{for(t=t.call(e);!(c=(r=t.next()).done);c=!0){a.push(r.value);if(n&&a.length===n)break}}catch(e){i=!0;o=e}finally{try{c||null==t.return||t.return()}finally{if(i)throw o}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return je(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return je(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Pe=function(e,n){var t,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},
"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;(r=0,o)&&(a=[2&a[0],o.value]);switch(a[0]){case 0:case 1:o=a;break;case 4:c.label++;return{value:a[1],done:!1};case 5:c.label++;r=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(o=c.trys,o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){c.label=a[1];break}if(6===a[0]&&c.label<o[1]){c.label=o[1];o=a;break}if(o&&c.label<o[2]){c.label=o[2];c.ops.push(a);break}o[2]&&c.ops.pop();c.trys.pop();continue}a=n.call(e,c)}catch(e){a=[6,e];r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};function we(e){
var n=e.onLearnMore,a=e.selectedBackgroundOption,c=e.onSelectBackgroundOption,s=e.currentDeviceId,l=e.smallerBackgroundOptions,u=(0,i.e7)([p.default],(function(){return p.default.getCurrentUser()})),E=xe(o.useState(null),2),A=E[0],_=E[1],I=(0,j.Z)(),M=g.ZP.canUseCustomBackgrounds(u),x=(0,i.cj)([m.Z],(function(){return M?m.Z.videoFilterAssets:{}})),P=o.useMemo((function(){return Object.values(x).filter((function(e){return e.type===F.xV.BACKGROUND}))}),[x]),w=(0,d.O)();o.useEffect((function(){I?(0,h.FU)(a,s,{track:!1}).catch((function(){return c(null)})):null!=a&&c(null)}),[s]);var k=function(e){c(e);(0,h.FU)(e,s,{location:w.location}).then((function(){return _(null)})).catch((function(){_(J.Z.Messages.VIDEO_BACKGROUND_ERROR_APPLY);(0,h.FU)(null,s,{location:w.location})}))};return I?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.X,{className:he().spacingTop24,variant:"eyebrow",color:"header-secondary",children:J.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND}),null!=A?(0,r.jsx)(O.Z,{
className:he().videoBackgroundError,children:A}):null,(0,r.jsx)(ge,{canUseCustomBackgrounds:M,customBackgroundOptions:P,selectedOption:a,onSelectOption:k,onUpsellClick:function(){(0,v.ZD)(Ae((function(){var e,o;return Pe(this,(function(a){switch(a.label){case 0:return[4,Promise.all([t.e(40532),t.e(51341)]).then(t.bind(t,351341))];case 1:e=a.sent(),o=e.default;return[2,function(e){return(0,r.jsx)(o,Me(Ie({},e),{onLearnMore:n,analyticsSource:Me(Ie({},w.location),{object:q.qAy.BUTTON_CTA})}))}]}}))})))},onAddBackgroundImage:function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((t=Ae((function(t){var o,a;return Pe(this,(function(c){switch(c.label){case 0:c.trys.push([0,2,,3]);return[4,(0,f.Ff)(e,F.xV.BACKGROUND)];case 1:o=c.sent();k(o);(0,y.g5)(o,n.type===me.m.MP4,r);_(null);return[3,3];case 2:a=c.sent();_(a.message);return[3,3];case 3:t();return[2]}}))})),function(e){return t.apply(this,arguments)}))},smallerOptions:l})]}):null}
var ke=t(934714),Ce=t(82961),De=t(736488),Ne=t(632895),Se=t(895598),Re=t.n(Se);function Ze(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Be(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function Te(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],c=!0,i=!1;try{for(t=t.call(e);!(c=(r=t.next()).done);c=!0){a.push(r.value);if(n&&a.length===n)break}}catch(e){i=!0;o=e}finally{try{c||null==t.return||t.return()}finally{if(i)throw o}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return Ze(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ze(e,n)
}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(){var e=Te(o.useState(!1),2),n=e[0],t=e[1],a=(0,i.e7)([ke.Z],(function(){return ke.Z.isMediaFilterSettingLoading()}));o.useEffect((function(){var e=new s.V7;if(a)e.start(150,(function(){t(!0)}));else{e.stop();t(!1)}return function(){return e.stop()}}),[a]);return n?(0,r.jsx)("div",{className:Re().filterLoadingIndicator,children:(0,r.jsx)(Ce.Z,{})}):null}function Ue(e){var n=e.hideDeviceSelector,t=void 0!==n&&n,a=e.hideDeviceHeader,s=void 0!==a&&a,d=e.onLearnMore,p=e.selectedBackgroundOption,O=e.onSelectBackgroundOption,v=e.renderCamera,g=e.hidePreviewToggle,m=void 0!==g&&g,y=e.showSmallBackgroundOptions,h=void 0!==y&&y,j=(0,i.e7)([ke.Z],(function(){return ke.Z.getVideoDeviceId()})),E=(0,i.Wu)([ke.Z],(function(){return Object.values(ke.Z.getVideoDevices())
})),A=u.qF.useSetting(),_=E.map((function(e){return{value:e.id,label:e.name}}));o.useEffect((function(){(0,f.XV)()}),[]);return(0,r.jsxs)(r.Fragment,{children:[v(j),ke.Z.isEnabled()?null:(0,r.jsx)(w.x,{className:Re().permissionWarning,color:"interactive-normal",variant:"text-sm/normal",children:J.Z.Messages.FORM_WARNING_VIDEO_PREVIEW.format({onEnableClick:l.Z.enable})}),m?null:(0,r.jsx)(De.Z,{className:Re().previewToggle,note:J.Z.Messages.CAMERA_PREVIEW_ALWAYS_PREVIEW_NOTE,onChange:function(e){u.qF.updateSetting(e);z.default.track(q.rMx.UPDATE_USER_SETTINGS_LOCAL,{always_preview_video:e})},value:A,hideBorder:!0,children:(0,r.jsx)("div",{className:Re().cameraPreviewTitle,children:J.Z.Messages.CAMERA_PREVIEW_ALWAYS_PREVIEW})}),t?null:(0,r.jsxs)(r.Fragment,{children:[s?null:(0,r.jsx)(b.X,{className:Re().spacingTop24,variant:"eyebrow",color:"header-secondary",children:J.Z.Messages.CAMERA_PREVIEW_CAMERA}),(0,r.jsx)(Ne.q4,{placeholder:J.Z.Messages.CHANGE_CAMERA,
className:c()(Re().selector,Be({},Re().selectorNoHeader,s)),options:_,value:j,onChange:function(e){return l.Z.setVideoDevice(e)}})]}),(0,r.jsx)(we,{onLearnMore:d,selectedBackgroundOption:p,onSelectBackgroundOption:O,currentDeviceId:j,smallerBackgroundOptions:h})]})}},760654:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(785893),o=(t(667294),t(240243));function a(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function c(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{}
;var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++){t=a[r];n.indexOf(t)>=0||(o[t]=e[t])}return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){t=a[r];n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}}return o}function s(e){var n=e.width,t=void 0===n?24:n,s=e.height,l=void 0===s?24:s,u=e.color,f=void 0===u?"currentColor":u,d=i(e,["width","height","color"]);return(0,r.jsxs)("svg",c(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){a(e,n,t[n])}))}return e}({},(0,o.Z)(d)),{width:t,height:l,viewBox:"0 0 24 24",fill:"none",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",
d:"M13.2899 2L6 2C3.79086 2 2 3.79086 2 6V18C2 20.2091 3.79086 22 6 22H18C20.2091 22 22 20.2091 22 18V10.7101C21.3663 10.8987 20.695 11 20 11C16.134 11 13 7.86599 13 4C13 3.30503 13.1013 2.63371 13.2899 2ZM8 6C9.1032 6 10 6.8952 10 8C10 9.1056 9.1032 10 8 10C6.8944 10 6 9.1056 6 8C6 6.8952 6.8944 6 8 6ZM6 18L9 14L11 16L15 11L18 18H6Z",fill:f}),(0,r.jsx)("path",{d:"M21 0V3H24V5H21V8H19V5H16V3H19V0H21Z",fill:f})]}))}}}]);
//# sourceMappingURL=268667d9b8f374ec3f0d.js.map