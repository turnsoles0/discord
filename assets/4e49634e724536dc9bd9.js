"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[99749],{674981:(t,e,n)=>{n.d(e,{Z:()=>h});var r=n(173436),i=n(832691),o=n(824756),u=n(461061);function l(t,e,n,r,i,o,u){try{var l=t[o](u),a=l.value}catch(t){n(t);return}l.done?e(a):Promise.resolve(a).then(r,i)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function u(t){l(o,r,i,u,a,"next",t)}function a(t){l(o,r,i,u,a,"throw",t)}u(void 0)}))}}var c=function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){
case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},s=new i.Z("CloudSync"),f=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.message=e};function h(t,e){return p.apply(this,arguments)}function p(){p=a((function(t,e){var n,i,l,a=arguments;return c(this,(function(c){switch(c.label){case 0:n=a.length>2&&void 0!==a[2]?a[2]:null;r.Z.dispatch({type:"GAME_CLOUD_SYNC_START",applicationId:t,branchId:e});c.label=1;case 1:
c.trys.push([1,3,,4]);return[4,o.j(t,e,n)];case 2:if((i=c.sent()).type===u.QCD.CONFLICT){r.Z.dispatch({type:"GAME_CLOUD_SYNC_CONFLICT",applicationId:t,branchId:e,next:i.next,remote:i.remote});throw new f("Conflict in cloud sync.")}i.type!==u.QCD.PULL&&i.type!==u.QCD.PUSH||s.info("Sync complete",i);return[3,4];case 3:if((l=c.sent())instanceof f)throw l;r.Z.dispatch({type:"GAME_CLOUD_SYNC_ERROR",applicationId:t,branchId:e});s.error("Failed to cloud sync:",l);throw new Error("Failed to cloud sync.");case 4:r.Z.dispatch({type:"GAME_CLOUD_SYNC_COMPLETE",applicationId:t,branchId:e});return[2,i]}}))}));return p.apply(this,arguments)}},8062:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(173436);const i={updateChannelDimensions:function(t,e,n,i,o){r.Z.wait((function(){r.Z.dispatch({type:"UPDATE_CHANNEL_DIMENSIONS",channelId:t,scrollTop:e,scrollHeight:n,offsetHeight:i});null!=o&&o()}))},updateChannelListScroll:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];r.Z.dispatch({
type:"UPDATE_CHANNEL_LIST_DIMENSIONS",guildId:t,scrollTop:e,channelIds:n})},channelListScrollTo:function(t,e){r.Z.dispatch({type:"UPDATE_CHANNEL_LIST_DIMENSIONS",guildId:t,scrollTo:e,channelIds:[]})},clearChannelListScrollTo:function(t){r.Z.dispatch({type:"UPDATE_CHANNEL_LIST_DIMENSIONS",guildId:t,scrollTo:null,channelIds:[]})},clearChannelDimensions:function(t,e){this.updateChannelDimensions(t,null,null,null,e)},updateGuildListScrollTo:function(t){r.Z.dispatch({type:"UPDATE_GUILD_LIST_DIMENSIONS",scrollTop:t})}}},836042:(t,e,n)=>{n.d(e,{$:()=>o});var r=n(112886),i=n(212033),o={binds:["mod+k","mod+t"],comboKeysBindGlobal:!0,action:function(){i.Z.hasLayers()||(0,r.$Z)();return!1}}},171826:(t,e,n)=>{n.d(e,{_:()=>u});var r=n(173436);var i=n(897576),o=n(62230),u={binds:["mod+/","mod+shift+/"],comboKeysBindGlobal:!0,action:function(){(0,i.nf)(o.J)?r.Z.dispatch({type:"HIDE_KEYBOARD_SHORTCUTS"}):r.Z.dispatch({type:"SHOW_KEYBOARD_SHORTCUTS"});return!1}}},404168:(t,e,n)=>{n.d(e,{xQ:()=>R.xQ,
h8:()=>R.h8,a8:()=>R.a8,o6:()=>x,ZP:()=>M,gJ:()=>j});var r=n(496486),i=n.n(r),o=n(120053),u=n.n(o),l=n(53551),a=n(989232),c=n(490640);function s(t){s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return s(t)}function f(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t,e){h=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return h(t,e)}var p=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var i=s(this).constructor
;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}const y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&h(t,e)}(n,t);var e=d(n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=e.call(this)).id=t.id;r.path=t.path;return r}n.fromPath=function(t){return new n({id:t,path:t})};return n}(c.Z);var _=n(356004),v=n(488076),C=n(1812),b=n(105405),g=n(859023),E=n(774581),m=n(462020),O=n(86124),S=n(961033),I=n(839146),R=n(560891),T=n(461061);function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z(t,e,n){e in t?Object.defineProperty(t,e,{value:n,
enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){Z(t,e,n[e])}))}return t}function w(t){return function(t){if(Array.isArray(t))return N(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(t,e)}(t)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P=Object.freeze({});function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return 1e3*t*(null!=e?e:1)}function U(t,e){if(!e.frecencyBoosters)return{};var n=v.Z.getFrequently(),r=n.reduce((function(t,e){var n=e.id,r=v.Z.getScore(n);return r>t?r:t}),0),i=[];switch(t){case R.h8.GUILD:i=n.filter((function(t){return t instanceof a.Z}));break;case R.h8.USER:i=n.filter((function(t){return t instanceof l.Sf&&t.type===T.d4z.DM}));break;case R.h8.GROUP_DM:i=n.filter((function(t){return t instanceof l.Sf&&t.isMultiUserDM()}));break;case R.h8.TEXT_CHANNEL:i=n.filter((function(t){return t instanceof l.Sf&&(0,l.r8)(t.type)}));break;case R.h8.VOICE_CHANNEL:i=n.filter((function(t){return t instanceof l.Sf&&t.isGuildVocal()}))}var o={},u=!0,c=!1,s=void 0;try{
for(var f,h=i[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value,d=p.id,y=v.Z.getScore(d);if(t===R.h8.USER&&p instanceof l.mn){if(p.type===T.d4z.DM)o[d=p.getRecipientId()]=1+y/r;else if(p.type===T.d4z.GROUP_DM){var C=p.recipients.length,g=!0,E=!1,m=void 0;try{for(var O,S=p.recipients[Symbol.iterator]();!(g=(O=S.next()).done);g=!0){o[O.value]=1+y/r*(1/C)}}catch(t){E=!0;m=t}finally{try{g||null==S.return||S.return()}finally{if(E)throw m}}}}else o[d]=1+y/r}}catch(t){c=!0;s=t}finally{try{u||null==h.return||h.return()}finally{if(c)throw s}}var I=b.Z.getFriendIDs(),N=!0,A=!1,Z=void 0;try{for(var L,w=I[Symbol.iterator]();!(N=(L=w.next()).done);N=!0){var P,D=L.value;o[D]=(null!==(P=o[D])&&void 0!==P?P:1)+.2}}catch(t){A=!0;Z=t}finally{try{N||null==w.return||w.return()}finally{if(A)throw Z}}var U=_.Z.getDMUserIds(),x=!0,j=!1,M=void 0;try{for(var H,k=U[Symbol.iterator]();!(x=(H=k.next()).done);x=!0){var G,q=H.value;o[q]=(null!==(G=o[q])&&void 0!==G?G:1)+.1}}catch(t){j=!0;M=t}finally{
try{x||null==k.return||k.return()}finally{if(j)throw M}}return o}function x(t){return{type:R.h8.HEADER,record:new R.X5(t),score:0}}function j(t,e,n,r){var i=n.length,o=r,u=e;if(0===i)return 0;if(null==o)o=u;else if(o===u)return u;return(u+=t===R.a8.UP?-1:1)<0||u>=i?j(t,u<0?i:-1,n,o):n[u].type===R.h8.HEADER?j(t,u,n,o):u}const M=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P,u=this;A(this,t);this.query="";this.options=P;this.results=[];this._userResults=[];this._groupDMResults=[];this._textChannelResults=[];this._voiceChannelResults=[];this._guildResults=[];this._applicationResults=[];this._linkResults=[];this._userBlacklist=null;this.parseUserResults=function(t){var e=t.results;if(u._include(R.h8.USER)){u._userResults=[];var n=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var a=o.value,c=a.user,s=a.id,f=a.score,h=a.comparator
;null==c&&(c=g.default.getUser(s));null!=c&&u._userResults.push({type:R.h8.USER,record:c,score:D(f),comparator:null!=h?h:void 0})}}catch(t){r=!0;i=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}u._userResults.length>u._limit&&(u._userResults.length=u._limit);u.updateAllResults()}};this.updateAllResults=function(){clearTimeout(u._asyncTimeout);u.results=i()(w(u._userResults).concat(w(u._groupDMResults),w(u._textChannelResults),w(u._voiceChannelResults),w(u._guildResults),w(u._linkResults))).uniqBy((function(t){return"".concat(t.type,"-").concat(t.record.id)})).sort(I.Z).value();u.onResultsChange(u.results,u.query)};this.onResultsChange=e;this.setOptions(o,!0);this._limit=r;this.createSearchContext();this.setResultTypes(n)}var e=t.prototype;e.createSearchContext=function(){null==this.userSearchContext&&(this.userSearchContext=S.Z.getSearchContext(this.parseUserResults,this._limit))};e.setLimit=function(t){var e=this.userSearchContext;this._limit=t
;null!=e&&e.setLimit(t);this._userResults.length>this._limit&&(this._userResults.length=this._limit);this._groupDMResults.length>this._limit&&(this._groupDMResults.length=this._limit);this._textChannelResults.length>this._limit&&(this._textChannelResults.length=this._limit);this._voiceChannelResults.length>this._limit&&(this._voiceChannelResults.length=this._limit);this._guildResults.length>this._limit&&(this._guildResults.length=this._limit);this._applicationResults.length>this._limit&&(this._applicationResults.length=this._limit);this._linkResults.length>this._limit&&(this._linkResults.length=this._limit)};e.setResultTypes=function(t){this.resultTypes=null!=t?new Set(t):null;this._userResults=this._include(R.h8.USER)?this._userResults:[];this._groupDMResults=this._include(R.h8.GROUP_DM)?this._groupDMResults:[];this._textChannelResults=this._include(R.h8.TEXT_CHANNEL)?this._textChannelResults:[];this._voiceChannelResults=this._include(R.h8.VOICE_CHANNEL)?this._voiceChannelResults:[]
;this._guildResults=this._include(R.h8.GUILD)?this._guildResults:[];this._applicationResults=this._include(R.h8.APPLICATION)?this._applicationResults:[];this._linkResults=this._include(R.h8.LINK)?this._linkResults:[]};e._include=function(t){return null==this.resultTypes||this.resultTypes.has(t)};e._isAsyncSearch=function(){return this._include(R.h8.USER)};e.setOptions=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.options=e?L({},this.options,t):t;null!=this.options.blacklist?this._userBlacklist=Array.from(this.options.blacklist).map((function(t){return t.startsWith("user:")?t.replace("user:",""):""})).filter((function(t){return""!==t})):this._userBlacklist=null};e.search=function(t,e){this.query=t;if(""!==t.trim()){this.queryUsers(t,e,this._limit);this._groupDMResults=this.queryGroupDMs(t,this._limit);this._textChannelResults=this.queryTextChannels(t,this._limit);this._voiceChannelResults=this.queryVoiceChannels(t,this._limit)
;this._guildResults=this.queryGuilds(t,this._limit);this._applicationResults=this.queryApplications(t,this._limit);this._linkResults=this.queryLink(t,this._limit);if(this._isAsyncSearch()){clearTimeout(this._asyncTimeout);this._asyncTimeout=setTimeout(this.updateAllResults,300)}else this.updateAllResults()}else{this.clear();this.updateAllResults()}};e.clear=function(){var t=this.userSearchContext;null!=t&&t.clearQuery();this.results=[];this._userResults=[];this._groupDMResults=[];this._textChannelResults=[];this._voiceChannelResults=[];this._guildResults=[];this._applicationResults=[];this._linkResults=[]};e.clean=function(){this.clear();this.destroy();this.query="";this.updateAllResults()};e.destroy=function(){var t=this.userSearchContext;if(null!=t){t.destroy();this.userSearchContext=null}};e.queryTextChannels=function(t,e){if(!this._include(R.h8.TEXT_CHANNEL))return[];var n=U(R.h8.TEXT_CHANNEL,this.options),r=this.options.blacklist,i=null!=r?function(t){
return!r.has("channel:".concat(t.id))}:void 0;return E.ZP.queryChannels({query:t,guildId:null,limit:e,fuzzy:!0,filter:i,boosters:n})};e.queryVoiceChannels=function(t,e){if(!this._include(R.h8.VOICE_CHANNEL))return[];var n=this.options.voiceChannelGuildFilter;if(void 0===n)return[];var r=U(R.h8.VOICE_CHANNEL,this.options);return E.ZP.queryChannels({query:t,guildId:n,limit:e,fuzzy:!0,type:C.Zb,boosters:r})};e.queryGuilds=function(t,e){if(!this._include(R.h8.GUILD))return[];var n=U(R.h8.GUILD,this.options),r=this.options.blacklist,i=null!=r?function(t){return!r.has("guild:".concat(t.id))}:void 0;return E.ZP.queryGuilds({query:t,limit:e,fuzzy:!0,filter:i,boosters:n})};e.queryUsers=function(t,e,n){var r=this.userSearchContext;if(null!=r&&this._include(R.h8.USER)){var i=this.options.userFilters;void 0!==e&&m.Z.requestMembers(e,t,100);r.setLimit(n);r.setQuery(t,i,this._userBlacklist,U(R.h8.USER,this.options))}};e.queryGroupDMs=function(t,e){if(!this._include(R.h8.GROUP_DM))return[]
;var n=this.options.blacklist,r=U(R.h8.GROUP_DM,this.options),i=null!=n?function(t){return!n.has("channel:".concat(t.id))}:void 0;return E.ZP.queryGroupDMs({query:t,limit:e,fuzzy:!0,filter:i,boosters:r})};e.queryApplications=function(t,e){return this._include(R.h8.APPLICATION)?E.ZP.queryApplications({query:t,limit:e,fuzzy:!0}):[]};e.queryLink=function(t,e){if(!this._include(R.h8.LINK))return[];var n,r=u().sanitizeUrl(t);try{n=new URL(r)}catch(t){return[]}var i=n.pathname,o=n.hostname,l=void 0===o?"":o,a=n.host,c=O.Z.isDiscordHostname(l)||window.location.host===a;return null!==i&&c&&O.Z.isAppRoute(i)?[{type:R.h8.LINK,record:y.fromPath(i),score:1}]:[]};return t}()},848828:(t,e,n)=>{n.d(e,{c:()=>d,Z:()=>y});var r=n(785893),i=(n(667294),n(294184)),o=n.n(i),u=n(78979),l=n(661505),a=n.n(l),c="up",s="right",f="down",h="left",p=function(t){var e=t.direction,n=void 0===e?c:e;return(0,r.jsx)("svg",{width:"10",height:"10",xmlns:"http://www.w3.org/2000/svg",className:o()(a().bindArrow,a()[n]),
children:(0,r.jsx)("g",{fill:"#FFFFFF",children:(0,r.jsx)("polygon",{transform:"translate(5.025000, 5.000000) scale(1, -1) translate(-5.025000, -5.000000) ",points:"4.16666667 10 4.16666672 3.33333333 1.25 6.25 0.05 5 5.00000005 0 9.99999967 5 8.75 6.25 5.83333338 3.33333333 5.83333333 10"})})})},d={mod:function(){return u.Z.modKey},alt:function(){return u.Z.altKey},up:function(){return(0,r.jsx)(p,{direction:c})},down:function(){return(0,r.jsx)(p,{direction:f})},left:function(){return(0,r.jsx)(p,{direction:h})},right:function(){return(0,r.jsx)(p,{direction:s})},pageup:function(){return"page up"},pagedown:function(){return"page down"},"any-character":function(){return"any key"},plus:function(){return"+"},return:function(){return u.Z.returnKey}};const y=function(t){var e=t.shortcut,n=t.className,i=Array.isArray(e)?e:e.split("+");return(0,r.jsx)("div",{className:o()(a().keybindShortcut,n),children:i.map((function(t){return null!=d[t]?d[t]():t})).map((function(t,e){return(0,r.jsx)("span",{
className:a().key,children:t},e)}))})}},62230:(t,e,n)=>{n.d(e,{J:()=>r});var r="KEYBOARD_SHORTCUT_MODAL_KEY"},112886:(t,e,n)=>{n.d(e,{$Z:()=>D,Cp:()=>U,yC:()=>x,tF:()=>j,Se:()=>M});var r=n(173436),i=n(642400),o=n(8062),u=n(804626),l=n(404168),a=n(416533),c=n(672549),s=n(510174),f=n(53551),h=n(356004),p=n(800539),d=n(379822),y=n(971738),_=n(932847),v=n(532497),C=n(215390),b=n(461061),g=n(35236);function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){m(t,e,n[e])}))}return t}function S(t,e){return function(t){
if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],u=!0,l=!1;try{for(n=n.call(t);!(u=(r=n.next()).done);u=!0){o.push(r.value);if(e&&o.length===e)break}}catch(t){l=!0;i=t}finally{try{u||null==n.return||n.return()}finally{if(l)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var I,R=function(){return Promise.resolve()},T=n(905435);R=T.playApplication;var N=Object.freeze((m(I={},l.xQ.USER,l.h8.USER),
m(I,l.xQ.TEXT_CHANNEL,l.h8.TEXT_CHANNEL),m(I,l.xQ.VOICE_CHANNEL,l.h8.VOICE_CHANNEL),m(I,l.xQ.GUILD,l.h8.GUILD),m(I,l.xQ.APPLICATION,l.h8.APPLICATION),I)),A=new RegExp("^".concat(l.xQ.USER,"|").concat(l.xQ.TEXT_CHANNEL,"|").concat(l.xQ.VOICE_CHANNEL,"|\\").concat(l.xQ.GUILD,"|\\").concat(l.xQ.APPLICATION));function Z(t){var e=S(function(t){var e,n=t.charAt(0),r=null!==(e=N[n])&&void 0!==e?e:null;return[t.replace(A,""),r]}(t),2);return{query:e[0],queryMode:e[1]}}function L(t){if(!C.Z.isOpen()){var e,n=y.Z.getGuildId(),r=d.Z.getChannelId(n);if(null!=r){var i=h.Z.getChannel(r);e=null!=i?i.type:null}_.default.track(b.rMx.QUICKSWITCHER_OPENED,{source:t,current_guild_id:n,current_channel_id:r,current_channel_type:e})}}function w(t,e){var n=C.Z.getProps(),r=n.results,i=n.queryMode,o=n.query,u=n.maxQueryLength,a=y.Z.getGuildId(),c=d.Z.getChannelId(a),s=r[(0,l.gJ)(l.a8.DOWN,-1,r)],p=v.Z.isEmail(o),b=v.Z.isPhoneNumber(o),E=v.Z.isUserTagLike(o),m=null!=c&&(0,g.AB)(c),O={
current_channel_id:m?void 0:c,current_channel_static_route:m?c:void 0,current_guild_id:a,query_mode:null!=i?i:"GENERAL",query_length:o.length,max_query_length:u,is_email_like:p,is_phone_like:b,is_username_like:E,query:p||b||E?null:o,top_result_type:null!=s?s.type:null,top_result_score:null!=s?s.score:null,num_results_total:C.Z.getResultTotals(),num_results_users:C.Z.getResultTotals(l.h8.USER),num_results_text_channels:C.Z.getResultTotals(l.h8.TEXT_CHANNEL),num_results_voice_channels:C.Z.getResultTotals(l.h8.VOICE_CHANNEL),num_results_guilds:C.Z.getResultTotals(l.h8.GUILD),num_results_group_dms:C.Z.getResultTotals(l.h8.GROUP_DM)};if(null!=c){var S=h.Z.getChannel(c);O.current_channel_type=null!=S?S.type:null}if(null!=e){var I=e.type,R=e.score,T=e.record;O.selected_type=I;O.selected_score=R;O.selected_index=r.indexOf(e);switch(I){case l.h8.GUILD:O.selected_guild_id=T.id;break;case l.h8.TEXT_CHANNEL:case l.h8.VOICE_CHANNEL:
T instanceof f.Sf&&(O.selected_guild_id=null!=T.guild_id?T.guild_id:null);O.selected_channel_id=T.id;break;case l.h8.GROUP_DM:O.selected_channel_id=T.id;break;case l.h8.USER:O.selected_user_id=T.id}}_.default.track(t,O)}function P(){r.Z.dispatch({type:"QUICKSWITCHER_HIDE"})}function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"KEYBIND",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";L(t);r.Z.dispatch(O({type:"QUICKSWITCHER_SHOW"},Z(e)))}function U(){w(b.rMx.QUICKSWITCHER_CLOSED);P()}function x(t){r.Z.dispatch(O({type:"QUICKSWITCHER_SEARCH"},Z(t)))}function j(t){r.Z.dispatch({type:"QUICKSWITCHER_SELECT",selectedIndex:t})}function M(t){P();w(b.rMx.QUICKSWITCHER_RESULT_SELECTED,t);var e,n=t.type,f=t.record,d={page:b.ZY5.QUICK_SWITCHER};switch(n){case l.h8.GUILD:(0,s.X)(f.id);break;case l.h8.TEXT_CHANNEL:null!=(e=h.Z.getChannel(f.id))&&(0,c.Kh)(e.id,{state:{analyticsSource:d}});break;case l.h8.VOICE_CHANNEL:
null!=(e=h.Z.getChannel(f.id))&&u.default.selectVoiceChannel(f.id);break;case l.h8.USER:i.Z.openPrivateChannel([f.id]);o.Z.channelListScrollTo(b.ME,f.id);break;case l.h8.GROUP_DM:(0,c.Kh)(f.id);o.Z.channelListScrollTo(b.ME,f.id);break;case l.h8.APPLICATION:var y=p.Z.getActiveLibraryApplication(f.id);R(f.id,y,{analyticsParams:{source:b.Sbl.QUICK_SWITCHER,location:b.Sbl.QUICK_SWITCHER}});break;case l.h8.LINK:(0,a.Z)(f.path)}r.Z.dispatch({type:"QUICKSWITCHER_SWITCH_TO",result:t})}},215390:(t,e,n)=>{n.d(e,{Z:()=>it});var r=n(496486),i=n.n(r),o=n(444450),u=n(173436),l=n(404168),a=n(53211),c=n(356004),s=n(105405),f=n(859023),h=n(560891),p=n(461061);var d=n(577028),y=n(80635),_=n(631134),v=n(402124),C=n(1812),b=n(212218),g=n(653772),E=n(940712),m=n(718375),O=n(379822),S=n(971738),I=n(390504),R=n(267097),T=n(774581),N=n(90816),A=n(959797);function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function L(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t){w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return w(t)}function P(t,e){return!e||"object"!==x(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function D(t,e){D=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return D(t,e)}function U(t){return function(t){if(Array.isArray(t))return Z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(t,e)}(t)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=w(t);if(e){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}var M,H="seenQSTutorial",k=0,G=!1,q=!1,F=null,Q=[],B=null,K=0,z=[],W=[];function Y(){q=g.Z.getGuildCount()>=3||i().size(c.Z.getMutablePrivateChannels())>=20;z=[]}function V(t){var e=function(t){
var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.Z,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.default,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.Z,i=e.getChannel(t);if(null==i)return null;var o=(0,a.F)(i,n,r);switch(i.type){case p.d4z.DM:var u=n.getUser(i.getRecipientId());return null==u?null:{type:h.h8.USER,record:u,score:0,comparator:o};case p.d4z.GROUP_DM:return{type:h.h8.GROUP_DM,record:i,score:0,comparator:o};default:return{type:h.h8.TEXT_CHANNEL,record:i,score:0,comparator:o}}}(t);return null==e||null!=F&&F!==e.type?null:e}function X(){var t,e,n=null!==(t=S.Z.getGuildId())&&void 0!==t?t:void 0,r=null!==(e=O.Z.getChannelId())&&void 0!==e?e:void 0;switch(F){case l.h8.USER:var o=_.default.getId();return T.ZP.getRecentlyTalked(r,100).filter((function(t){return t.record.id!==o}));case l.h8.APPLICATION:return T.ZP.queryApplications({query:"",limit:100,fuzzy:!0});case l.h8.GUILD:return T.ZP.queryGuilds({query:"",limit:100,fuzzy:!0})
;case l.h8.TEXT_CHANNEL:return T.ZP.queryChannels({query:"",guildId:S.Z.getGuildId(),limit:100,fuzzy:!0});case l.h8.VOICE_CHANNEL:return T.ZP.queryChannels({query:"",guildId:S.Z.getGuildId(),limit:100,fuzzy:!0,filter:function(){return!0},type:C.Zb})}for(var u=[],a=[],s=1;s<W.length;s+=1){var f=V(W[s]);null!=f&&((f.type!==l.h8.TEXT_CHANNEL&&f.type!==l.h8.VOICE_CHANNEL||E.Z.can(p.Plq.VIEW_CHANNEL,f.record))&&a.push(f))}if(a.length>0){var h;(h=u).push.apply(h,[(0,l.o6)(A.Z.Messages.QUICKSWITCHER_LAST_CHANNEL)].concat(U(a)))}var y=function(t){var e=[];v.Z.getRecentlyEditedDrafts(v.d.ChannelMessage).forEach((function(n){var r=n.channelId;if(!t(r)){var i=V(r);null!=i&&e.push(i)}}));return e}((function(t){return t===r||W.includes(t)}));if(y.length>0){var b;(b=u).push.apply(b,[(0,l.o6)(A.Z.Messages.QUICKSWITCHER_DRAFTS)].concat(U(y)))}var g=i()(c.Z.loadAllGuildAndPrivateChannelsFromDisk()).values().concat(d.Z.computeAllActiveJoinedThreads()).filter((function(t){var e=t.id
;return e!==r&&!W.includes(e)&&m.ZP.getMentionCount(e)>0})).map((function(t){return V(t.id)})).filter(N.lm).value();if(g.length>0){u.push((0,l.o6)(A.Z.Messages.QUICKSWITCHER_MENTIONS));u=u.concat(g)}if(null!=n){var R=C.ZP.getSelectableChannelIds(n).filter((function(t){var e=c.Z.getChannel(t);return!(null==e||t===r||W.includes(t)||I.Z.isChannelMuted(e.guild_id,t)||null!=e.parent_id&&I.Z.isChannelMuted(e.guild_id,e.parent_id))&&m.ZP.hasRelevantUnread(e)})).map((function(t){return V(t)})).filter((function(t){return t}));Object.values(d.Z.getActiveJoinedUnreadThreadsForGuild(n)).forEach((function(t){for(var e in t){var n=V(e);null!=n&&R.push(n)}}));if(R.length>0){u.push((0,l.o6)(A.Z.Messages.QUICKSWITCHER_UNREAD_CHANNELS));u=u.concat(R)}}return i()(u).uniqBy((function(t){return t.record.id})).value()}function J(t,e){switch(F){case l.h8.USER:var n=g.Z.getGuild(S.Z.getGuildId());t.unshift((0,l.o6)(null!=n?A.Z.Messages.QUICKSWITCHER_QUERYMODE_USERS_IN_GUILD.format({name:n.name
}):A.Z.Messages.QUICKSWITCHER_QUERYMODE_USERS));Q=t;break;case l.h8.TEXT_CHANNEL:t.unshift((0,l.o6)(A.Z.Messages.QUICKSWITCHER_QUERYMODE_TEXT_CHANNELS));Q=t;break;case l.h8.VOICE_CHANNEL:t.unshift((0,l.o6)(A.Z.Messages.QUICKSWITCHER_QUERYMODE_VOICE_CHANNELS));Q=t;break;case l.h8.GUILD:t.unshift((0,l.o6)(A.Z.Messages.QUICKSWITCHER_QUERYMODE_GUILDS));Q=t;break;case l.h8.APPLICATION:t.unshift((0,l.o6)(A.Z.Messages.QUICKSWITCHER_QUERYMODE_APPLICATIONS));Q=t;break;default:Q=t}if(e!==B){B=e;K=Math.max(e.length,K);k=(0,l.gJ)(l.a8.DOWN,-1,Q)}else{var r=Q[k];null!=r&&r.type===l.h8.HEADER&&(k=(0,l.gJ)(l.a8.DOWN,k,Q))}rt.emitChange()}function $(t){var e,n=t.query,r=t.queryMode,i=null!==(e=S.Z.getGuildId())&&void 0!==e?e:void 0,o=new Set(["user:".concat(_.default.getId())]);null!=i&&o.add("guild:".concat(i));M=null!=M?M:new l.ZP(tt,null,null!=r?100:5,{frecencyBoosters:!0,blacklist:o});B=null;K=n.length;F=r;M.search(n)}function tt(t,e){if(!function(t,e){if(t.length!==e.length)return!1
;for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(r.record.id!==i.record.id)return!1}return!0}(t=""===(e=e.trim()).trim()?X():t,z)){z=t;J(t,e)}}function et(){B=null;K=0;z=[];if(null!=M){M.destroy();M=null}}var nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&D(t,e)}(n,t);var e=j(n);function n(){L(this,n);return e.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(b.ZP,g.Z,c.Z);this.syncWith([y.Z],(function(){return!0}));G=o.Z.get(H)||!1};r.isOpen=function(){return null!=M};r.getResultTotals=function(t){return null==M?0:null==t?M.results.reduce((function(t,e){return e.type!==l.h8.HEADER?t+1:t}),0):M.results.reduce((function(e,n){return n.type===t?e+1:e}),0)};r.channelNoticePredicate=function(t,e){var n=Date.now()-e>=p.Hqc;return q&&n};r.getFrequentGuilds=function(){
return null!=M?M.queryGuilds("",100):null};r.getFrequentGuildsLength=function(){return null!=M?M.queryGuilds("",100).length:0};r.getChannelHistory=function(){return W};r.getProps=function(){return{theme:y.Z.theme,query:null!=M?M.query:"",queryMode:F,results:Q,selectedIndex:k,seenTutorial:G,maxQueryLength:K}};return n}(R.Z),rt=new nt(u.Z,{CONNECTION_OPEN:Y,CONNECTION_OPEN_SUPPLEMENTAL:Y,QUICKSWITCHER_SHOW:$,SHOW_ACTION_SHEET_QUICK_SWITCHER:$,QUICKSWITCHER_HIDE:et,OVERLAY_SET_INPUT_LOCKED:et,HIDE_ACTION_SHEET_QUICK_SWITCHER:et,QUICKSWITCHER_SEARCH:function(t){var e,n=t.query,r=t.queryMode;if(null==M)return!1;var i=null!==(e=S.Z.getGuildId())&&void 0!==e?e:null;if(F!==r){M.setResultTypes(null!=r?[r]:null);M.setLimit(null!=r?100:5);var o,u=null!==(o=S.Z.getGuildId())&&void 0!==o?o:void 0;r===l.h8.USER&&null!=u?M.setOptions({userFilters:{guild:u,friends:!0}},!0):r===l.h8.VOICE_CHANNEL?M.setOptions({voiceChannelGuildFilter:null},!0):M.setOptions({userFilters:null,
voiceChannelGuildFilter:void 0},!0)}F=r;M.search(n,F===l.h8.USER?i:void 0)},QUICKSWITCHER_SELECT:function(t){k=t.selectedIndex},QUICKSWITCHER_SWITCH_TO:function(){if(G)return!1;G=!0;o.Z.set(H,!0)},CHANNEL_SELECT:function(t){var e=t.channelId;if(null==e)return!1;(W=W.filter((function(t){return t!==e}))).unshift(e);W.length>4&&(W.length=4)}});const it=rt},488076:(t,e,n)=>{n.d(e,{Z:()=>T});var r=n(791462),i=n(444450),o=n(173436),u=n(528275),l=n(356004),a=n(653772),c=n(379822),s=n(971738);function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(t,r.key,r)}}function p(t){p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return p(t)}function d(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t,e){y=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return y(t,e)}var _=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}var C,b,g="selectedChannelGuildFrecency",E=new u.Z({computeBonus:function(){return 100},computeWeight:function(t){var e=0;0===t?e=100:t>=1&&t<2?e=70:t>=2&&t<4?e=50:t>=4&&t<7?e=30:t>=7&&(e=10);return e},lookupKey:function(t){
return null!==(b=null!==(C=a.Z.getGuild(t))&&void 0!==C?C:l.Z.getChannel(t))&&void 0!==b?b:l.Z.getChannel(l.Z.getDMFromUserId(t))},afterCompute:function(t){__OVERLAY__||i.Z.set(g,t)},numFrequentlyItems:100,maxSamples:10}),m=null,O=null;function S(t){var e=t.guildId,n=t.channelId;if(n!==m){m=null!=n?n:null;null!=n&&E.track(n)}if(null!=e&&e!==O){O=e;E.track(e)}return!1}function I(){E.markDirty();return!1}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&y(t,e)}(n,t);var e=v(n);function n(){f(this,n);return e.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(s.Z,c.Z);var t=i.Z.get(g,null);null!=t&&E.overwriteHistory(t)};r.getFrequently=function(){return E.frequently};r.getScore=function(t){var e;return null!==(e=E.getFrecency(t))&&void 0!==e?e:0};r.getScoreForDM=function(t){
var e=l.Z.getDMFromUserId(t);return null!=e?this.getScore(e):0};r.getMaxScore=function(){return 1e3};r.getBonusScore=function(){return 100};r.__getLocalVars=function(){return{SELECTED_USAGE_HISTORY:g,MAX_NUM_SELECTED_ITEMS:100,MAX_SAMPLES:10,SELECTION_BONUS:100,frecency:E,lastSelected:m,lastSelectedGuild:O}};!function(t,e,n){e&&h(t.prototype,e);n&&h(t,n)}(n,[{key:"frecency",get:function(){return E}}]);return n}(r.ZP.Store);R.displayName="FrecencyStore";const T=new R(o.Z,{CONNECTION_OPEN:I,OVERLAY_INITIALIZE:I,VOICE_CHANNEL_SELECT:S,CHANNEL_SELECT:S})},267097:(t,e,n)=>{n.d(e,{Z:()=>f});var r=n(791462);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return o(t)}function u(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t,e){l=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return l(t,e)}var a=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=o(t);if(e){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&l(t,e)}(n,t);var e=c(n)
;function n(){i(this,n);return e.apply(this,arguments)}var r=n.prototype;r.channelNoticePredicate=function(t,e){0;return!1};r.__getLocalVars=function(){return{}};return n}(r.ZP.Store);s.displayName="ChannelNoticeStoreBase";const f=s},604943:(t,e,n)=>{n.d(e,{Z:()=>m});var r=n(791462),i=n(173436),o=n(674981),u=n(800539),l=n(73462),a=n(57203),c=n(742269),s=n(824756),f=n(461061);function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t){p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return p(t)}function d(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t,e){y=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return y(t,e)}var _,v,C,b=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}
;function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&y(t,e)}(n,t);var e=g(n);function n(){h(this,n);return e.apply(this,arguments)}var r=n.prototype;r.initialize=function(){c.FB&&s.S();_={};v=new Set;C=[]};r.getState=function(t,e){var n=(0,a.Tu)(t,e);return _[n]};r.isSyncing=function(t,e){var n=(0,a.Tu)(t,e);return v.has(n)};r.__getLocalVars=function(){return{syncStates:_,
syncingComboIds:v,lastSeenDiscordApplicationIds:C}};return n}(r.ZP.Store);E.displayName="CloudSyncStore";const m=new E(i.Z,{GAME_CLOUD_SYNC_START:function(t){var e=t.applicationId,n=t.branchId,r=(0,a.Tu)(e,n);v.add(r)},GAME_CLOUD_SYNC_UPDATE:function(t){var e=t.state,n=!0,r=!1,i=void 0;try{for(var o,u=Object.keys(e)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var l=o.value;_[l]=e[l]}}catch(t){r=!0;i=t}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}},GAME_CLOUD_SYNC_COMPLETE:function(t){var e=t.applicationId,n=t.branchId,r=(0,a.Tu)(e,n);v.delete(r);_[r]={type:f.TzF.DONE,timestamp:Date.now()};return!0},GAME_CLOUD_SYNC_CONFLICT:function(t){var e=t.applicationId,n=t.branchId,r=t.next,i=t.remote,o=(0,a.Tu)(e,n);_[o]={type:f.TzF.CONFLICT,next:r,remote:i};v.delete(o)},GAME_CLOUD_SYNC_ERROR:function(t){var e=t.applicationId,n=t.branchId,r=(0,a.Tu)(e,n);_[r]={type:f.TzF.ERROR};v.delete(r)},RUNNING_GAMES_CHANGE:function(){
var t=l.Z.getRunningDiscordApplicationIds(),e=C.filter((function(e){return!t.includes(e)})),n=!0,r=!1,a=void 0;try{for(var c,s=function(){var t=c.value,e=u.Z.getActiveLibraryApplication(t);if(null==e)return"continue";i.Z.wait((function(){try{o.Z(e.id,e.branchId)}catch(t){}}))},f=e[Symbol.iterator]();!(n=(c=f.next()).done);n=!0)s()}catch(t){r=!0;a=t}finally{try{n||null==f.return||f.return()}finally{if(r)throw a}}C=t;return!1}})},824756:(t,e,n)=>{n.d(e,{S:()=>b,j:()=>E});var r=n(675860),i=n(173436),o=n(832691),u=n(861967),l=n(631134),a=n(134734),c=n(57203),s=n(742269),f=n(588641),h=n(461061);function p(t,e,n,r,i,o,u){try{var l=t[o](u),a=l.value}catch(t){n(t);return}l.done?e(a):Promise.resolve(a).then(r,i)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function u(t){p(o,r,i,u,l,"next",t)}function l(t){p(o,r,i,u,l,"throw",t)}u(void 0)}))}}var y,_=function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1]
;return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}
;function v(){if(null==y)throw new Error("Initialize cloud sync module before syncing.");return y}function C(){return s.FB&&((0,s.id)()||(0,s.ED)())}function b(){return g.apply(this,arguments)}function g(){return(g=d((function(){var t;return _(this,(function(e){switch(e.label){case 0:if(null!=y)return[2];if(!C()){new o.Z("CloudSyncUtils").warn("CloudSync is not supported on this platform");return[2]}return[4,f.default.ensureModule("discord_cloudsync")];case 1:e.sent();t=f.default.getCloudSync();(y=new t).on("state",(function(t){return i.Z.dispatch({type:"GAME_CLOUD_SYNC_UPDATE",state:t})}));return[2]}}))}))).apply(this,arguments)}function E(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!a.Z.supportsCloudSync(t,e))return Promise.resolve({type:h.QCD.NONE});var i,o=v(),s=a.Z.getState(t,e);if(null==s)throw new Error("No dispatch state for ".concat(t,":").concat(e));var f=null!==(i=s.storage)&&void 0!==i?i:{},p=(0,c.Tu)(t,e),d=l.default.getToken()
;if(null==d)throw new Error("Cannot use cloud sync when not authenticated.");var y=null!=s.installPath?(0,u.Z)(s.installPath):null;if(null==y)throw new Error("No install path for ".concat(t,":").concat(e));var _=l.default.getId(),C={forceHash:n,manifestPath:h.SRg.STORAGE_MANIFEST(y,_),roots:null!=f.roots?f.roots:[{id:h.SRg.ROOT_ID,paths:Object.keys(h.SRg.ROOT_PLATFORMS).map((function(t){return{platform:t,path:h.SRg.ROOT_STORAGE_PATH(y,_)}})),patterns:h.SRg.ROOT_PATTERN}],storage:{baseURL:"".concat(r.Z.getAPIBaseURL()).concat(h.ANM.APPLICATION_STORAGE(t,e)),token:d},replacements:{INSTALLDIR:h.SRg.INSTALL_DIR(y),USERID:_,BRANCHID:e}};return o.sync(p,C)}},905435:(t,e,n)=>{n.r(e);n.d(e,{installApplication:()=>J,performDefaultLibraryApplicationAction:()=>et,playApplication:()=>M,repairApplication:()=>tt,updateApplication:()=>$})
;var r=n(36347),i=n(785893),o=n(667294),u=n(730381),l=n.n(u),a=n(791462),c=n(674981),s=n(881548),f=n(367124),h=n(604943),p=n(191940),d=n(487502),y=n(962271),_=n(67416),v=n(897576),C=n(932847),b=n(461061),g=n(959797),E=n(184804),m=n.n(E),O=n(380203),S=n.n(O);function I(t,e,n,r,i,o,u){try{var l=t[o](u),a=l.value}catch(t){n(t);return}l.done?e(a):Promise.resolve(a).then(r,i)}function R(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function u(t){I(o,r,i,u,l,"next",t)}function l(t){I(o,r,i,u,l,"throw",t)}u(void 0)}))}}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function A(t){A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return A(t)}function Z(t){for(var e=1;e<arguments.length;e++){
var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){N(t,e,n[e])}))}return t}function L(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t,e){w=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return w(t,e)}var P=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function D(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=A(t);if(e){var i=A(this).constructor
;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return L(this,n)}}var U=function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}
i[2]&&u.ops.pop();u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&w(t,e)}(n,t);var e=D(n);function n(){T(this,n);var t;(t=e.apply(this,arguments)).onClose=function(){t.props.onClose()};t.handlePlay=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t.props,i=r.libraryApplication,o=r.analyticsParams;t.onClose();M(i.id,i,{analyticsParams:o,cloudSync:e,cloudSyncForceHash:n})};t.handleChooseDownload=function(){var e=t.props.cloudSyncState;e.type===b.TzF.CONFLICT&&t.handlePlay(!0,e.remote.hash)};t.handleChooseUpload=function(){var e=t.props.cloudSyncState
;e.type===b.TzF.CONFLICT&&t.handlePlay(!0,e.next.hash)};return t}var r=n.prototype;r.renderConflictButton=function(t,e,n,r){return(0,i.jsxs)(p.Co,{className:m().conflictButton,innerClassName:m().conflictButtonInner,onClick:r,children:[(0,i.jsx)("div",{className:n}),(0,i.jsxs)("div",{className:m().buttonBody,children:[(0,i.jsx)("div",{className:m().conflictTitle,children:t}),(0,i.jsx)("div",{children:g.Z.Messages.CLOUD_SYNC_MODAL_CONFLICT_LAST_MODIFIED}),(0,i.jsx)("div",{className:m().timestamp,children:l()(e).calendar()})]})]})};r.renderError=function(){var t=this,e=this.props.application;return(0,i.jsxs)(o.Fragment,{children:[(0,i.jsxs)(_.hz,{children:[(0,i.jsx)(d.Z,{justify:d.Z.Justify.CENTER,children:(0,i.jsx)("div",{className:m().errorArt})}),(0,i.jsx)("div",{className:m().description,children:g.Z.Messages.CLOUD_SYNC_MODAL_ERROR_DESCRIPTION.format({applicationName:e.name})})]}),(0,i.jsx)(_.mz,{children:(0,i.jsxs)(d.Z,{justify:d.Z.Justify.BETWEEN,children:[(0,i.jsx)(p.Co,{
className:m().linkButton,size:m().linkButtonSize,look:p.Co.Looks.LINK,color:p.Co.Colors.PRIMARY,onClick:this.onClose,children:g.Z.Messages.CANCEL}),(0,i.jsxs)(d.Z,{direction:d.Z.Direction.HORIZONTAL,justify:d.Z.Justify.END,children:[(0,i.jsx)(p.Co,{look:p.Co.Looks.LINK,color:p.Co.Colors.PRIMARY,onClick:function(){return t.handlePlay()},className:m().retryButton,children:g.Z.Messages.RETRY}),(0,i.jsx)(p.Co,{onClick:function(){return t.handlePlay(!1)},children:g.Z.Messages.GAME_ACTION_BUTTON_PLAY})]})]})})]})};r.renderConflict=function(){var t=this.props,e=t.application,n=t.cloudSyncState;if(n.type!==b.TzF.CONFLICT)throw new Error("Cannot render conflict for non conflict type");return(0,i.jsxs)(_.hz,{className:S().marginBottom20,children:[(0,i.jsx)("div",{className:m().description,children:g.Z.Messages.CLOUD_SYNC_MODAL_CONFLICT_DESCRIPTION.format({applicationName:e.name})
}),this.renderConflictButton(g.Z.Messages.CLOUD_SYNC_MODAL_CONFLICT_CHOICE_DOWNLOAD,n.remote.timestamp,m().conflictDownloadArt,this.handleChooseDownload),(0,i.jsxs)(d.Z,{className:m().choiceWrapper,align:d.Z.Align.CENTER,children:[(0,i.jsx)("div",{className:m().choiceLine}),(0,i.jsx)("div",{className:m().choiceTitle,children:g.Z.Messages.CLOUD_SYNC_MODAL_OR}),(0,i.jsx)("div",{className:m().choiceLine})]}),this.renderConflictButton(g.Z.Messages.CLOUD_SYNC_MODAL_CONFLICT_CHOICE_UPLOAD,n.next.timestamp,m().conflictUploadArt,this.handleChooseUpload)]})};r.render=function(){var t=this.props,e=t.cloudSyncState,n=t.transitionState,r=e.type===b.TzF.CONFLICT?g.Z.Messages.CLOUD_SYNC_MODAL_CONFLICT_HEADER:g.Z.Messages.CLOUD_SYNC_MODAL_ERROR_HEADER;return(0,i.jsxs)(_.Y0,{transitionState:n,className:m().modal,"aria-label":r,children:[(0,i.jsxs)(_.xB,{separator:!1,children:[(0,i.jsx)(_.ol,{className:m().closeButton,onClick:this.onClose}),(0,i.jsx)(y.Z,{tag:"h2",className:S().marginReset,children:r
})]}),e.type===b.TzF.CONFLICT?this.renderConflict():this.renderError()]})};return n}(o.PureComponent),j=a.ZP.connectStores([h.Z,f.Z],(function(t){var e=t.libraryApplication,n=t.branchId;return{cloudSyncState:h.Z.getState(e.id,n),application:f.Z.getGame(e.id)}}))(x);function M(t,e,n){return H.apply(this,arguments)}function H(){return(H=R((function(t,e,n){var r,o,u,l,a,h,p;return U(this,(function(d){switch(d.label){case 0:if(null==(r=f.Z.getGame(t)))return[2];o=n.cloudSync,u=void 0===o||o,l=n.cloudSyncForceHash,a=void 0===l?null:l,h=n.analyticsParams;if(!u||null==e)return[3,4];p=e.branchId;d.label=1;case 1:d.trys.push([1,3,,4]);return[4,c.Z(e.id,p,a)];case 2:d.sent();return[3,4];case 3:d.sent();(0,v.h7)((function(t){return(0,i.jsx)(j,Z({libraryApplication:e,analyticsParams:h,branchId:p},t))}));return[2];case 4:C.default.track(b.rMx.APPLICATION_OPENED,Z({application_id:r.id,application_name:r.name,type:b.q5t.LAUNCH,distributor:null!=e?e.getDistributor():null},h))
;return[2,s.Z.launch(r.id,null==e?void 0:e.branchId)]}}))}))).apply(this,arguments)}var k=n(133840),G=n(286283),q=n(134734),F=n(937689),Q=n(400055),B=n(664252);function K(t,e,n,r,i,o,u){try{var l=t[o](u),a=l.value}catch(t){n(t);return}l.done?e(a):Promise.resolve(a).then(r,i)}function z(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function u(t){K(o,r,i,u,l,"next",t)}function l(t){K(o,r,i,u,l,"throw",t)}u(void 0)}))}}function W(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function Y(t,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})));n.push.apply(n,r)}return n}(Object(e)).forEach((function(n){
Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}));return t}var V=function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}
i[2]&&u.ops.pop();u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};function X(t,e,o,u,l){var a=B.Z.getInstallationPath(t.id,e),c=null!=t.eulaId&&!Q.Z.hasAcceptedEULA(t.eulaId);null==a||c?(0,v.ZD)(z((function(){var r,o;return V(this,(function(u){switch(u.label){case 0:return[4,Promise.all([n.e(40532),n.e(35666),n.e(29585),n.e(40721),n.e(65296),n.e(5387),n.e(76748),n.e(64229),n.e(22045),n.e(33646),n.e(42311),n.e(69672),n.e(80911),n.e(39052),n.e(61434),n.e(76948),n.e(51796),n.e(77289),n.e(26492),n.e(90348),n.e(94125),n.e(12479)]).then(n.bind(n,356943))];case 1:r=u.sent(),o=r.default;return[2,function(n){return(0,i.jsx)(o,Y(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))))
;r.forEach((function(e){W(t,e,n[e])}))}return t}({},n),{applicationId:t.id,branchId:e,analyticsLocation:l}))}]}}))}))):(0,r.LO)({application:t,branchId:e,buildId:o,manifestIds:u,installationPath:a,analyticsLocation:l})}function J(t,e,n){var r=f.Z.getGame(t);if(null!=r){var i=k.Z.getTargetBuildId(r.id,e),o=k.Z.getTargetManifests(r.id,e);null!=i&&null!=o&&null!=X&&X(r,e,i,o,n)}}function $(t,e){var n=f.Z.getGame(t);if(null!=n)return r.li(n,e,k.Z.getTargetBuildId(n.id,e),k.Z.getTargetManifests(n.id,e))}function tt(t,e,n){var i=f.Z.getGame(t);if(null!=i)return r.cG(i,e,n)}function et(t,e){var n=(0,G.i)(t,q.Z,F.Z),r=e.analyticsParams;switch(n){case b.apO.PLAY:return M(t.id,t,{analyticsParams:r});case b.apO.INSTALL:return J(t.id,t.branchId,r.source);case b.apO.UPDATE:return $(t.id,t.branchId)}}}}]);
//# sourceMappingURL=4e49634e724536dc9bd9.js.map